<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Name | Portfolio</title>
  <link rel="stylesheet" href="assets/site.css" />
  <style>
    /* Make index truly full-screen (no framed container) */
    body { overflow: hidden; }
    .fullscreen-wrap{
      position: fixed;
      inset: 0;
      z-index: 1; /* above grid-bg */
    }
    svg#chart{
      position:absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }
    /* Optional tiny hint in corner (remove if you want ZERO UI) */
    .corner-hint{
      position: fixed;
      top: 18px;
      right: 18px;
      z-index: 5;
      font-size: 12px;
      color: rgba(255,255,255,0.65);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,0.22);
      backdrop-filter: blur(10px);
      user-select: none;
    }
  </style>
</head>
<body>
  <!-- Grid background -->
  <div class="grid-bg" aria-hidden="true"></div>

  <!-- Fullscreen chart + nodes -->
  <div class="fullscreen-wrap" id="wrap">
    <div class="corner-hint" id="hint">Loading…</div>

    <svg id="chart" viewBox="0 0 1000 360" preserveAspectRatio="none" aria-label="Stock line animation">
      <!-- OPTIONAL: if you want grid ONLY from the CSS background, delete this <g> -->
      <g opacity="0.10" stroke="white">
        <path d="M0 60 H1000" /><path d="M0 120 H1000" /><path d="M0 180 H1000" />
        <path d="M0 240 H1000" /><path d="M0 300 H1000" />
        <path d="M125 0 V360" /><path d="M250 0 V360" /><path d="M375 0 V360" />
        <path d="M500 0 V360" /><path d="M625 0 V360" /><path d="M750 0 V360" />
        <path d="M875 0 V360" />
      </g>

      <path id="lineGlow" d="" fill="none" stroke="rgba(122,231,255,0.22)" stroke-width="12" stroke-linecap="round" />
      <path id="line" d="" fill="none" stroke="rgba(255,255,255,0.82)" stroke-width="3.8" stroke-linecap="round" />
      <g id="dots"></g>
    </svg>

    <!-- Nodes (JS positions these at peaks) -->
    <div class="node center-node" id="nodeAbout" data-target="about.html">
      <div class="label"><strong>About Me</strong><span>Center of it all</span></div>
      <div class="chip"></div>
    </div>

    <div class="node" id="nodeHobbies" data-target="hobbies.html">
      <div class="label"><strong>Hobbies</strong><span>What I do off-hours</span></div>
      <div class="chip"></div>
    </div>

    <div class="node alt" id="nodeExp" data-target="experience.html">
      <div class="label"><strong>Professional Experience</strong><span>Work + projects</span></div>
      <div class="chip"></div>
    </div>

    <div class="node" id="nodeExtra" data-target="extracurriculars.html">
      <div class="label"><strong>Extracurriculars</strong><span>Leadership + service</span></div>
      <div class="chip"></div>
    </div>

    <div class="node alt" id="nodeResume" data-target="resume.html">
      <div class="label"><strong>Resume</strong><span>PDF + highlights</span></div>
      <div class="chip"></div>
    </div>
  </div>

<script>
(() => {
  const wrapEl = document.getElementById('wrap');
  const hint = document.getElementById('hint');
  const line = document.getElementById('line');
  const glow = document.getElementById('lineGlow');
  const dots = document.getElementById('dots');

  // Peaks = where nodes will appear (x,y in viewBox coords)
  const peaks = [
    { x: 160, y: 130, nodeId: 'nodeHobbies' },
    { x: 330, y:  95, nodeId: 'nodeExp' },
    { x: 500, y: 115, nodeId: 'nodeAbout' },
    { x: 670, y:  88, nodeId: 'nodeExtra' },
    { x: 840, y: 120, nodeId: 'nodeResume' }
  ];

  // Create a “moving stock line” that slides across the screen, then locks.
  function buildPath(offsetX){
    const baseY = 230;
    const pts = [
      {x: -200 + offsetX, y: baseY + 25},
      {x:  -50 + offsetX, y: baseY - 20},
      {x:   80 + offsetX, y: baseY - 75},
      {x:  160 + offsetX, y: peaks[0].y},
      {x:  240 + offsetX, y: baseY - 25},
      {x:  290 + offsetX, y: baseY - 95},
      {x:  330 + offsetX, y: peaks[1].y},
      {x:  420 + offsetX, y: baseY - 10},
      {x:  500 + offsetX, y: peaks[2].y},
      {x:  590 + offsetX, y: baseY - 110},
      {x:  670 + offsetX, y: peaks[3].y},
      {x:  760 + offsetX, y: baseY - 35},
      {x:  840 + offsetX, y: peaks[4].y},
      {x:  920 + offsetX, y: baseY - 45},
      {x: 1120 + offsetX, y: baseY - 10},
    ];

    // Smooth-ish quadratic path
    let d = `M ${pts[0].x} ${pts[0].y}`;
    for(let i=1; i<pts.length; i++){
      const prev = pts[i-1];
      const cur = pts[i];
      const cx = (prev.x + cur.x)/2;
      const cy = (prev.y + cur.y)/2;
      d += ` Q ${prev.x} ${prev.y} ${cx} ${cy}`;
    }
    d += ` T ${pts[pts.length-1].x} ${pts[pts.length-1].y}`;
    return d;
  }

  function setDots(){
    dots.innerHTML = '';
    for(const p of peaks){
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx', p.x);
      c.setAttribute('cy', p.y);
      c.setAttribute('r', 6);
      c.setAttribute('fill', 'rgba(255,255,255,0.88)');
      c.setAttribute('opacity', '0');
      c.style.transition = 'opacity 500ms ease';
      dots.appendChild(c);
    }
  }

  function viewBoxToPixels(x, y){
    const r = wrapEl.getBoundingClientRect();
    return { px: (x/1000)*r.width, py: (y/360)*r.height };
  }

  function positionNodes(){
    for(const p of peaks){
      const node = document.getElementById(p.nodeId);
      const {px, py} = viewBoxToPixels(p.x, p.y);
      node.style.left = px + 'px';
      node.style.top  = py + 'px';
    }
  }

  function showNodes(){
    hint.textContent = 'Click a node';
    [...dots.children].forEach((c, i) => setTimeout(()=> c.style.opacity='1', 140 + i*110));
    for(const p of peaks){
      const node = document.getElementById(p.nodeId);
      setTimeout(()=> node.classList.add('show'), 420);
    }
  }

  // Click -> navigate
  document.querySelectorAll('.node').forEach(n=>{
    n.addEventListener('click', ()=>{
      const target = n.getAttribute('data-target');
      if(target) window.location.href = target;
    });
  });

  // Animate slide-in
  let t0=null;
  const duration=1600;
  const startOffset=-420;  // bigger move so it visibly “slides across”
  const endOffset=0;

  function tick(ts){
    if(!t0) t0 = ts;
    const t = ts - t0;
    const p = Math.min(1, t/duration);
    const ease = 1 - Math.pow(1 - p, 3); // easeOutCubic
    const off = startOffset + (endOffset-startOffset)*ease;

    const d = buildPath(off);
    line.setAttribute('d', d);
    glow.setAttribute('d', d);

    if(p < 1){
      requestAnimationFrame(tick);
    } else {
      setDots();
      positionNodes();
      showNodes();
    }
  }

  window.addEventListener('resize', positionNodes);

  hint.textContent = 'Market line moving…';
  requestAnimationFrame(tick);
})();
</script>
</body>
</html>
